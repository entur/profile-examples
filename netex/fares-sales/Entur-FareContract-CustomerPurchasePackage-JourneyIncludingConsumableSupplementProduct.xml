<?xml version="1.0" encoding="UTF-8"?>

<!-- 
    ###
    
    Example of public transport product with a supplement (or third party) product which becomes consumable upon activation of a journey.
    
    ###
-->

<PublicationDelivery xmlns="http://www.netex.org.uk/netex" version="1.10:NO-NeTEx-fares:0.9">

    <PublicationTimestamp>2021-01-05T12:34:56</PublicationTimestamp>
    <ParticipantRef>ENT</ParticipantRef>

    <dataObjects>

        <!-- Reference data -->
        <ResourceFrame id="ENT:ResourceFrame:1" version="1">
            <typesOfValue>
                <!-- assignment types -->
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:ValidityRule" version="1">
                    <Name>Rule describing parameters when ValidableElement is activated</Name>
                </TypeOfAccessRightAssignment>
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:ActivationRule" version="1">
                    <Name>Rule describing how to activate</Name>
                </TypeOfAccessRightAssignment>
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:ValidationRule" version="1">
                    <Name>Rule describing when to validate</Name>
                </TypeOfAccessRightAssignment>
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:ActivationUsageRule" version="1">
                    <Name>Rule describing when a usage validity period may be activated</Name>
                </TypeOfAccessRightAssignment>
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:AddedAccessRights" version="1">
                    <Name>CPPA describing additional access rights added as a result of activation</Name>
                </TypeOfAccessRightAssignment>
                <TypeOfAccessRightAssignment id="ENT:TypeOfAccessRightAssignment:ActivationDetails" version="1">
                    <Name>CPPA describing information about where the activation took place</Name>
                </TypeOfAccessRightAssignment>
            </typesOfValue>

            <!-- Organisations (placeholders) -->
            <organisations>
                <Authority id="ENT:Authority:ENT" version="1">
                    <Name>Entur AS</Name>
                </Authority>
                <OtherOrganisation id="ENT:Organisation:HouseOfCoffees" version="1">
                    <Name>Vending provider</Name>
                    <OrganisationType>other</OrganisationType>
                </OtherOrganisation>
            </organisations>
        </ResourceFrame>



        <FareFrame id="ENT:FareFrame:1" version="1">
            <qualityStructureFactors>
                <QualityStructureFactor id="ENT:QualityStructureFactor:Activation-x1" version="1">
                    <Name>Activation (always singular)</Name>
                    <Factor>activation</Factor>
                    <Value>1</Value>
                </QualityStructureFactor>
                <QualityStructureFactor id="ENT:QualityStructureFactor:Consumption-x3" version="1">
                    <Name>Three items (consumptions)</Name>
                    <Factor>consumption</Factor>
                    <Value>3</Value>
                </QualityStructureFactor>
            </qualityStructureFactors>


            <validableElements>
                <ValidableElement id="ENT:ValidableElement:SingleRide" version="1">
                    <Name>Single ride</Name>
                </ValidableElement>
                <ValidableElement id="ENT:ValidableElement:Coffee" version="1">
                    <Name>Coffee</Name>
                </ValidableElement>
                <ValidableElement id="ENT:ValidableElement:Snack" version="1">
                    <Name>Snack</Name>
                </ValidableElement>
            </validableElements>


            <usageParameters>
                <UserProfile id="ENT:UserProfile:Adult" version="1">
                    <Name lang="eng">Adult</Name>
                </UserProfile>
                <Interchanging id="ENT:Interchanging:Unlimited" version="1">
                    <CanInterchange>true</CanInterchange>
                </Interchanging>
                <UsageValidityPeriod id="ENT:UsageValidityPeriod:1hour" version="1">
                    <UsageTrigger>startOutboundRide</UsageTrigger>
                    <UsageEnd>endOfRide</UsageEnd>
                    <StandardDuration>PT1H</StandardDuration>
                    <ActivationMeans>useOfMobileDevice useOfValidator</ActivationMeans>
                    <!-- Outer bounds of usage valdity period -->
                    <StartDate>2021-01-01</StartDate>
                    <EndDate>2021-12-31</EndDate>
                </UsageValidityPeriod>
            </usageParameters>


            <fareProducts>
                <PreassignedFareProduct id="ENT:PreassignedFareProduct:ReturnTrip" version="1">
                    <Name lang="eng">Return trip</Name>
                    <accessRightsInProduct>
                        <AccessRightInProduct version="1" id="ENT:AccessRightInProduct:SingleRide" order="1">
                            <MaximumAccess>2</MaximumAccess>
                            <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                        </AccessRightInProduct>
                    </accessRightsInProduct>
                </PreassignedFareProduct>
                <ThirdPartyProduct id="ENT:ThirdPartyProduct:Coffee" version="1">
                    <Name lang="eng">Coffee</Name>
                    <accessRightsInProduct>
                        <AccessRightInProductRef ref="ENT:ValidableElement:Coffee" version="1"/>
                    </accessRightsInProduct>
                </ThirdPartyProduct>
                <ThirdPartyProduct id="ENT:ThirdPartyProduct:Snack" version="1">
                    <Name lang="eng">Snack</Name>
                    <accessRightsInProduct>
                        <AccessRightInProductRef ref="ENT:ValidableElement:Snack" version="1"/>
                    </accessRightsInProduct>
                </ThirdPartyProduct>
            </fareProducts>


            <salesOfferPackages>
                <SalesOfferPackage id="ENT:SalesOfferPackage:JourneyWithConditionalSupplementProduct" version="1">
                    <Name lang="eng">Return ticket with three included coffees/snacks</Name>
                    <salesOfferPackageElements>
                        <SalesOfferPackageElement id="ENT:SalesOfferPackageElement:ReturnTrip" version="1" order="1">
                            <Name lang="eng">Return trip</Name>
                            <PreassignedFareProductRef ref="ENT:PreassignedFareProduct:ReturnTrip" version="1"/>
                        </SalesOfferPackageElement>
                        <SalesOfferPackageElement id="ENT:SalesOfferPackageElement:Coffee" version="1" order="1">
                            <Name lang="eng">Coffee/Snack</Name>
                            <ThirdPartyProductRef ref="ENT:ThirdPartyProduct:Coffee" version="1"/>
                        </SalesOfferPackageElement>
                        <SalesOfferPackageElement id="ENT:SalesOfferPackageElement:Snack" version="1" order="1">
                            <Name lang="eng">Coffee/Snack</Name>
                            <ThirdPartyProductRef ref="ENT:ThirdPartyProduct:Snack" version="1"/>
                        </SalesOfferPackageElement>
                    </salesOfferPackageElements>
                </SalesOfferPackage>
            </salesOfferPackages>
        </FareFrame>



        <SalesTransactionFrame id="ENT:SalesTransactionFrame:Case1" version="1">

            <customerAccounts>
                <CustomerAccount id="ENT:CustomerAccount:1" version="1">
                    <!-- placeholder -->
                </CustomerAccount>
            </customerAccounts>

            <fareContracts>
                <FareContract id="ENT:FareContract:1" version="1">
                    <Name>Return trip including 3 coffees/snacks</Name>
                    <StartDate>2021-01-10T13:37:00</StartDate>
                    <EndDate>2021-01-10T23:45:00</EndDate>
                    <fareContractEntries>
                        <SalesTransaction version="1" id="ENT:SalesTransaction:1">
                            <Name>Purchase</Name>
                            <Date>2021-01-01T12:34:00</Date>
                            <Amount>510</Amount>
                            <Currency>NOK</Currency>
                            <PaymentMethod>debitCard</PaymentMethod>
                            <customerPurchasePackages>
                                <CustomerPurchasePackageRef ref="ENT:CustomerPurchasePackage:JourneyAndCoffee" version="1"/>
                            </customerPurchasePackages>
                        </SalesTransaction>
                    </fareContractEntries>
                </FareContract>
            </fareContracts>


            <customerPurchasePackages>
                <CustomerPurchasePackage id="ENT:CustomerPurchasePackage:JourneyAndSupplements" version="1">

                    <travelSpecifications>
                        <TravelSpecification id="ENT:TravelSpecification:Outbound" version="1">
                            <Name>Outbound journey</Name>
                            <!-- overall usage validity -->
                            <StartOfValidity>2021-01-01T00:00:00</StartOfValidity>
                            <EndOfValidity>2021-12-31T23:59:59</EndOfValidity>
                        </TravelSpecification>
                        <TravelSpecification id="ENT:TravelSpecification:Return" version="1">
                            <Name>Return journey</Name>
                            <!-- overall usage validity -->
                            <StartOfValidity>2021-01-01T00:00:00</StartOfValidity>
                            <EndOfValidity>2021-12-31T23:59:59</EndOfValidity>
                        </TravelSpecification>
                        <TravelSpecification id="ENT:TravelSpecification:Coffee_Snack" version="1">
                            <Name>Coffee/Snack</Name>
                            <!-- overall usage validity -->
                            <StartOfValidity>2021-01-01T00:00:00</StartOfValidity>
                            <EndOfValidity>2021-12-31T23:59:59</EndOfValidity>
                        </TravelSpecification>
                    </travelSpecifications>



                    <!-- TODO: Review ! -->
                    <dependentElementActivations>
                        <!-- Outbound journey -->
                        <!-- (implicitly given, probably not strictly necessary to define explicitly) -->
                        <DependentElementActivation id="ENT:DependentElementActivation:1" version="1" order="1">
                            <elementActivations>
                                <ElementActivation id="ENT:ElementActivation:OutboundJourney" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:OutboundJourney" version="1"/>
                                </ElementActivation>
                            </elementActivations>
                        </DependentElementActivation>

                        <!-- Return journey -->
                        <DependentElementActivation id="ENT:DependentElementActivation:1" version="1" order="1">
                            <dependsOn>
                                <DependsOn>
                                    <ElementAccessRef ref="ENT:ElementActivation:OutboundJourney" version="1"/>
                                    <MarkedAs>used</MarkedAs>
                                    <!-- List of acceptable values -->
                                </DependsOn>
                            </dependsOn>
                            <elementActivations>
                                <ElementActivation id="ENT:ElementActivation:ReturnJourney" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:ReturnJourney" version="1"/>
                                </ElementActivation>
                            </elementActivations>
                        </DependentElementActivation>

                        <!-- Supplement products -->
                        <DependentElementActivation id="ENT:DependentElementActivation:3" version="1" order="2">
                            <DependsOnGroupingType>OR</DependsOnGroupingType>
                            <dependsOn>
                                <DependsOn>
                                    <ElementAccessRef ref="ENT:ElementActivation:OutboundJourney" version="1"/>
                                    <MarkedAs>used</MarkedAs>
                                    <!-- List of acceptable values -->
                                </DependsOn>
                                <DependsOn>
                                    <ElementAccessRef ref="ENT:ElementActivation:ReturnJourney" version="1"/>
                                    <MarkedAs>used</MarkedAs>
                                    <!-- List of acceptable values -->
                                </DependsOn>
                            </dependsOn>

                            <!-- TODO: Wrapper...something (ValidableElement) for Coffee/Snack ? -->
                            <elementActivations>
                                <ElementActivation id="ENT:ElementActivation:Coffee" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:Coffee" version="1"/>
                                </ElementActivation>
                                <ElementActivation id="ENT:ElementActivation:Snack" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:Snack" version="1"/>
                                </ElementActivation>
                            </elementActivations>

                            <elementConsumptions>
                                <ElementConsumption id="ENT:ElementConsumption:Coffee" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:Coffee" version="1"/>
                                </ElementConsumption>
                                <ElementConsumption id="ENT:ElementConsumption:Snack" version="1">
                                    <CustomerPurchasePackageElementRef ref="ENT:CustomerPurchasePackageElement:Snack" version="1"/>
                                </ElementConsumption>
                            </elementConsumptions>

                            <QualityStructureFactorRef ref="ENT:QualityStructureFactor:Consumption-x3" version="1"/>
                        </DependentElementActivation>
                    </dependentElementActivations>



                    <!-- TODO: Helt utdatert? Mye vanskeligere konsumering med denne konstruksjonen. -->
                    <!--
                     <!-\- Activation is ordered -\->
                    <elementAccessGroupsInSequence>
                        
                        <!-\- Outbound journey -\->
                        <ElementActivationGroup id="ENT:ElementActivationGroup:1" version="1" order="1">
                            <ElementAccess>
                                <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                <InstanceNumber>1</InstanceNumber>
                            </ElementAccess>
                        </ElementActivationGroup>

                        <!-\- Supplement products -\->
                        <ElementActivationGroup id="ENT:ElementActivationGroup:2" version="1" order="2">
                            <ElementAccess>
                                
                                <!-\- TODO: ? -\->
                                <ValidableElementRef ref="ENT:ValidableElement:Coffee" version="1"/>
                                <ValidableElementRef ref="ENT:ValidableElement:Snack" version="1"/>
                                <InstanceNumber>3</InstanceNumber>
                            </ElementAccess>
                        </ElementActivationGroup>
                        
                        <!-\- Return journey -\->
                        <ElementActivationGroup id="ENT:ElementActivationGroup:3" version="1" order="1">
                            <ElementAccess>
                                <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                <InstanceNumber>1</InstanceNumber>
                            </ElementAccess>
                        </ElementActivationGroup>
                        
                    </elementAccessGroupsInSequence>
-->



                    <SalesOfferPackageRef ref="ENT:SalesOfferPackage:JourneyWithConditionalSupplementProducts"/>

                    <customerPurchasePackageElements>

                        <!-- Journeys (outbound and return journey) -->

                        <CustomerPurchasePackageElement id="ENT:CustomerPurchasePackageElement:OutboundJourney" version="1" order="1">

                            <elementAccesses>
                                <!-- *Activation* of outbound Journey  -->
                                <!-- (i.e. return Journey not yet activated)  -->
                                <CustomerPurchasePackageElementAccess>
                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <MarkedAs>activated</MarkedAs>

                                    <!-- TO BE ADDED TO STANDARD: Validity period as a result of the activation (UVP/StandardDuration in this case) -->
                                    <StartOfValidity>2021-01-10T15:51:00</StartOfValidity>
                                    <EndOfValidity>2021-01-10T16:51:00</EndOfValidity>

                                </CustomerPurchasePackageElementAccess>

                                <!-- *Consumption* of outbound Journey  -->
                                <!-- TODO: Would be much better in this case if MaredAs was a list to which both statuses was added upon triggering -->
                                <CustomerPurchasePackageElementAccess>
                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <MarkedAs>used</MarkedAs>
                                    <!-- TO BE ADDED TO STANDARD: Validity period as a result of the activation (UVP/StandardDuration in this case) -->
                                    <StartOfValidity>2021-01-10T15:51:00</StartOfValidity>
                                    <EndOfValidity>2021-01-10T16:51:00</EndOfValidity>
                                </CustomerPurchasePackageElementAccess>
                            </elementAccesses>

                            <validityParameterAssignments>

                                <!-- Outbound Journey activation rule -->
                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:OutboundJourney-Activation" version="1" order="1">

                                    <!-- This type defines uvp activation rules -->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ActivationRule"/>

                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <UsageValidityPeriodRef ref="ENT:UsageValidityPeriod:1hour" version="1"/>
                                    </limitations>
                                    <!-- Only once -->
                                    <QualityStructureFactorRef ref="ENT:QualityStructureFactor:Activation-x1" version="1"/>
                                </CustomerPurchaseParameterAssignment>

                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:OutboundJourney-Validity" version="1" order="1">

                                    <!-- This type defines the validable element parameters when access right is activated -->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ValidityRule"/>

                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <InterchangingRef ref="ENT:Interchanging:Unlimited"/>
                                        <UserProfileRef ref="ENT:UserProfile:Adult" version="1"/>
                                    </limitations>
                                    <ValidityParameterGroupingType>AND</ValidityParameterGroupingType>
                                    <validityParameters>
                                        <AuthorityRef ref="ENT:Authority:ENT" version="1"/>
                                    </validityParameters>
                                </CustomerPurchaseParameterAssignment>
                            </validityParameterAssignments>
                        </CustomerPurchasePackageElement>


                        <CustomerPurchasePackageElement id="ENT:CustomerPurchasePackageElement:ReturnJourney" version="1" order="1">

                            <elementAccesses>
                                <!-- *Activation* of return Journey  -->
                                <CustomerPurchasePackageElementAccess>
                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <MarkedAs>activated</MarkedAs>

                                    <!-- TO BE ADDED TO STANDARD: Validity period as a result of the activation (UVP/StandardDuration in this case) -->
                                    <StartOfValidity>2021-01-10T17:14:00</StartOfValidity>
                                    <EndOfValidity>2021-01-10T18:14:00</EndOfValidity>

                                </CustomerPurchasePackageElementAccess>

                                <!-- *Consumption* of outbound Journey  -->
                                <!-- TODO: Would be much better in this case if MaredAs was a list to which both statuses was added upon triggering -->
                                <CustomerPurchasePackageElementAccess>
                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <MarkedAs>used</MarkedAs>
                                    <!-- TO BE ADDED TO STANDARD: Validity period as a result of the activation (UVP/StandardDuration in this case) -->
                                    <StartOfValidity>2021-01-10T17:14:00</StartOfValidity>
                                    <EndOfValidity>2021-01-10T18:14:00</EndOfValidity>
                                </CustomerPurchasePackageElementAccess>
                            </elementAccesses>

                            <validityParameterAssignments>

                                <!-- Return Journey activation rule -->
                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:ReturnJourney-Activation" version="1" order="1">

                                    <!-- This type defines uvp activation rules -->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ActivationRule"/>

                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <UsageValidityPeriodRef ref="ENT:UsageValidityPeriod:1hour" version="1"/>
                                    </limitations>
                                    <!-- Only once -->
                                    <QualityStructureFactorRef ref="ENT:QualityStructureFactor:Activation-x1" version="1"/>
                                </CustomerPurchaseParameterAssignment>

                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:ReturnJourney-Validity" version="1" order="1">

                                    <!-- This type defines the validable element parameters when access right is activated -->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ValidityRule"/>

                                    <ValidableElementRef ref="ENT:ValidableElement:SingleRide" version="1"/>
                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <InterchangingRef ref="ENT:Interchanging:Unlimited"/>
                                        <UserProfileRef ref="ENT:UserProfile:Adult" version="1"/>
                                    </limitations>
                                    <ValidityParameterGroupingType>AND</ValidityParameterGroupingType>
                                    <validityParameters>
                                        <AuthorityRef ref="ENT:Authority:ENT" version="1"/>
                                    </validityParameters>
                                </CustomerPurchaseParameterAssignment>

                            </validityParameterAssignments>
                        </CustomerPurchasePackageElement>



                        <!-- Coffee/Snacks -->

                        <CustomerPurchasePackageElement id="ENT:CustomerPurchasePackageElement:Coffee_Snack" version="1" order="0">

                            <elementAccesses>

                                <!-- *Activation* entry for Coffee/Snack (i.e. this Access is consumption of one Coffee item) -->
                                <CustomerPurchasePackageElementAccess created="2021-01-10T16:04:00">
                                    <!--ValidableElementRef ref="ENT:ValidableElement:Coffee" version="1"/ -->

                                    <!-- TODO: Not yet included, should be explicit or simply implicit from DependentElementActivation ? -->
                                    <TypeOfActivationRef ref="ENT:TypeOfActivation:Grouping" version="1"/>

                                    <MarkedAs>activated</MarkedAs>

                                    <!-- TO BE ADDED TO STANDARD: Validity period as a result of the activation (UVP/StandardDuration in this case) -->
                                    <!-- TODO: Not necessary in this case -->
                                    <!--StartOfValidity>2021-01-10T15:51:00</StartOfValidity>
                                    <EndOfValidity>2021-01-10T16:51:00</EndOfValidity-->
                                </CustomerPurchasePackageElementAccess>
                            </elementAccesses>

                            <validityParameterAssignments>

                                <!-- Coffee/Snacks consumption rule -->
                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:CoffeeSnack-Consumtion" version="1" order="0">

                                    <!-- This type defines uvp activation rules -->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ActivationRule"/>

                                    <!-- NOT added as this is implicitly included per <includes> -->
                                    <!-- 
                                    <ValidableElementRef ref="ENT:ValidableElement:Coffee" version="1"/>
                                    <ValidableElementRef ref="ENT:ValidableElement:Snacks" version="1"/>
                                    -->

                                    <!-- TODO: Not yet included, should be explicit or simply implicit from DependentElementActivation ? -->
                                    <TypeOfActivationRef ref="ENT:TypeOfActivation:Grouping" version="1"/>

                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <UsageValidityPeriod id="ENT:UsageValidityPeriod:2021" version="1">
                                            <UsageTrigger>activation</UsageTrigger>
                                            <!-- Outer bounds of usage valdity period -->
                                            <StartDate>2021-01-01</StartDate>
                                            <EndDate>2021-12-31</EndDate>
                                        </UsageValidityPeriod>
                                    </limitations>
                                    <!-- maximum 3 consumptions in total -->
                                    <QualityStructureFactorRef ref="ENT:QualityStructureFactor:Consumption-x3" version="1"/>
                                    <includes>
                                        <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchasePackageElement:Coffee" version="1" order="0">
                                            <ValidableElementRef ref="ENT:ValidableElement:Coffee" version="1"/>
                                        </CustomerPurchaseParameterAssignment>
                                        <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchasePackageElement:Snacks" version="1" order="0">
                                            <ValidableElementRef ref="ENT:ValidableElement:Snacks" version="1"/>
                                        </CustomerPurchaseParameterAssignment>
                                    </includes>
                                </CustomerPurchaseParameterAssignment>
                            </validityParameterAssignments>


                            <!-- ALTERNATIVE APPROACH:
                            <validityParameterAssignments>

                                <!-\- Coffee/Snacks consumption rule -\->
                                <CustomerPurchaseParameterAssignment id="ENT:CustomerPurchaseParameterAssignment:CoffeeSnack-Consumtion" version="1" order="0">

                                    <!-\- This type defines uvp activation rules -\->
                                    <TypeOfAccessRightAssignmentRef ref="ENT:TypeOfAccessRightAssignment:ActivationRule"/>
                                    <ValidableElementRef ref="ENT:ValidableElement:Coffee_Snacks" version="1"/> <!-\- potential wrapper type (currently not defined) -\->
                                    
                                    <!-\- TODO: Not yet included, should be explicit or simply implicit from DependentElementActivation ? -\->
                                    <TypeOfActivationRef ref="ENT:TypeOfActivation:Grouping" version="1"/>

                                    <LimitationGroupingType>AND</LimitationGroupingType>
                                    <limitations>
                                        <UsageValidityPeriod id="ENT:UsageValidityPeriod:2021" version="1">
                                            <UsageTrigger>activation</UsageTrigger>
                                            <!-\- Outer bounds of usage valdity period -\->
                                            <StartDate>2021-01-01</StartDate>
                                            <EndDate>2021-12-31</EndDate>
                                        </UsageValidityPeriod>
                                    </limitations>
                                    <!-\- maximum 3 consumptions (in total) -\->
                                    <QualityStructureFactorRef ref="ENT:QualityStructureFactor:Consumption-x3" version="1"/>
                                </CustomerPurchaseParameterAssignment>
                                
                            </validityParameterAssignments>-->

                        </CustomerPurchasePackageElement>
                    </customerPurchasePackageElements>
                </CustomerPurchasePackage>
            </customerPurchasePackages>
        </SalesTransactionFrame>
    </dataObjects>
</PublicationDelivery>
